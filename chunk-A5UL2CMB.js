import{a as d,b as m,c as h,l as u,n as v}from"./chunk-7UPRQAP3.js";import{B as c,R as l,X as s,a,b as n,q as i,t as p}from"./chunk-5ON5RGEH.js";var g=class t{apiUrl=`${v}/ftp`;COOKIE_NAME="authToken";http=s(h);cookieService=s(u);getAuthHeaders(){let r=this.cookieService.get(this.COOKIE_NAME);return new d({Authorization:`Bearer ${r}`})}getHttpOptions(r="json"){return{headers:this.getAuthHeaders(),responseType:r}}uploadFile(r){let e=new FormData;return e.append("file",r),this.http.post(`${this.apiUrl}/upload`,e,this.getHttpOptions())}downloadFile(r){let e=new m().set("remoteFileName",r),E=n(a({},this.getHttpOptions("blob")),{params:e});return this.http.get(`${this.apiUrl}/download`,E).pipe(p(o=>o),c(o=>this.handleDownloadError(o)))}handleDownloadError(r){console.error("Error en descarga:",r);let e=this.getErrorMessage(r);return i(()=>new Error(e))}getErrorMessage(r){return{404:"Archivo no encontrado",500:"Error interno del servidor",403:"Acceso no autorizado",401:"Autenticaci\xF3n requerida"}[r.status]||"Error desconocido al descargar"}static \u0275fac=function(e){return new(e||t)};static \u0275prov=l({token:t,factory:t.\u0275fac,providedIn:"root"})};export{g as a};
