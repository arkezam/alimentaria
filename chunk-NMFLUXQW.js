import{a as N,b as z}from"./chunk-EL3TMZM7.js";import"./chunk-VTMQXDHM.js";import{a as O}from"./chunk-A5UL2CMB.js";import{d as j,k as P}from"./chunk-7UPRQAP3.js";import{k as V,l as F,m as R,n as U}from"./chunk-ARZNZIPW.js";import{Db as r,Eb as s,Fb as h,Kb as b,Lb as M,Ma as w,Mb as T,Pa as l,Ua as S,X as E,Za as I,ca as u,cb as _,da as m,ea as f,fa as C,jb as x,mb as k,nb as D,ob as t,pb as i,qb as v,rb as g,ub as p,vb as c}from"./chunk-5ON5RGEH.js";var A=(o,n,e)=>({"bg-yellow-200 text-yellow-800":o,"bg-blue-200 text-blue-800":n,"bg-red-50 text-red-800":e}),B=(o,n)=>n.id;function G(o,n){if(o&1){let e=g();t(0,"tr",8)(1,"td",10),r(2),i(),t(3,"td",11),r(4),i(),t(5,"td",12)(6,"span",13),r(7),i()(),t(8,"td",11),r(9),i(),t(10,"td",11),r(11),i(),t(12,"td",14),r(13),i(),t(14,"td",15)(15,"div",16)(16,"button",17),p("click",function(){let d=u(e).$implicit,L=c();return m(L.verRegistro(d))}),f(),t(17,"svg",18),v(18,"path",19),i(),r(19," Modificar "),i()()()()}if(o&2){let e=n.$implicit;l(2),s(e.respuesta),l(2),s(e.demandado),l(2),x("ngClass",b(7,A,e.estado==="PENDIENTE",e.estado=="ATENDIDO",e.estado=="OBSERVADO")),l(),h(" ",e.estado," "),l(2),s(e.numeroCuenta),l(2),s(e.numeroCCI),l(2),s(e.fechaCreacion)}}function H(o,n){if(o&1&&v(0,"iframe",41),o&2){let e=c(2);x("src",e.pdfUrl,w)}}function $(o,n){o&1&&(t(0,"div",42),r(1," No hay documento para mostrar "),i())}function J(o,n){if(o&1){let e=g();t(0,"div",20),p("click",function(){u(e);let d=c();return m(d.cerrarModalDetalles())}),t(1,"div",21),p("click",function(d){return u(e),m(d.stopPropagation())}),t(2,"div",22)(3,"h3",23),r(4,"Detalles de la Solicitud"),i(),t(5,"button",24),p("click",function(){u(e);let d=c();return m(d.cerrarModalDetalles())}),f(),t(6,"svg",25),v(7,"path",26),i()()(),C(),t(8,"div",27)(9,"div",28)(10,"div",29)(11,"div")(12,"label",30),r(13,"C\xF3digo:"),i(),t(14,"p",31),r(15),i()(),t(16,"div")(17,"label",30),r(18,"Demandado:"),i(),t(19,"p",31),r(20),i()(),t(21,"div")(22,"label",30),r(23,"Estado:"),i(),t(24,"span",32),r(25),i()(),t(26,"div")(27,"label",30),r(28,"Expediente:"),i(),t(29,"p",31),r(30),i()(),t(31,"div")(32,"label",30),r(33,"Fecha de Solicitud:"),i(),t(34,"p",31),r(35),M(36,"date"),i()(),t(37,"div")(38,"label",30),r(39,"Juzgado:"),i(),t(40,"p",31),r(41),i()(),t(42,"div")(43,"label",30),r(44,"Archivo Adjunto:"),i(),t(45,"button",33),p("click",function(){u(e);let d=c();return m(d.verOficio(d.selectedSolicitud==null?null:d.selectedSolicitud.rutaOficioJuzgado))}),r(46," Ver Documento "),i()()(),t(47,"div",34)(48,"label",30),r(49,"Observaciones:"),i(),t(50,"p",35),r(51),i()()(),t(52,"div",36),_(53,H,1,1,"iframe",37)(54,$,2,0,"div",38),i()(),t(55,"div",39)(56,"button",40),p("click",function(){u(e);let d=c();return m(d.cerrarModalDetalles())}),r(57," Cerrar "),i()()()()}if(o&2){let e=c();l(15),s(e.selectedSolicitud==null?null:e.selectedSolicitud.codigoSolicitud),l(5),s(e.selectedSolicitud==null?null:e.selectedSolicitud.demandado),l(4),x("ngClass",b(13,A,(e.selectedSolicitud==null?null:e.selectedSolicitud.estado)==="PENDIENTE",(e.selectedSolicitud==null?null:e.selectedSolicitud.estado)==="ATENDIDO",(e.selectedSolicitud==null?null:e.selectedSolicitud.estado)!=="ATENDIDO")),l(),h(" ",e.selectedSolicitud==null?null:e.selectedSolicitud.estado," "),l(5),s(e.selectedSolicitud==null?null:e.selectedSolicitud.expediente),l(5),s(T(36,10,e.selectedSolicitud==null?null:e.selectedSolicitud.fechaEmision,"dd/MM/yyyy")),l(6),s(e.selectedSolicitud==null?null:e.selectedSolicitud.juzgado),l(10),s(e.selectedSolicitud==null?null:e.selectedSolicitud.observacion),l(2),x("ngIf",e.pdfUrl),l(),x("ngIf",!e.pdfUrl)}}function q(o,n){if(o&1){let e=g();t(0,"div",20),p("click",function(){u(e);let d=c();return m(d.cerrarModal())}),t(1,"div",21),p("click",function(d){return u(e),m(d.stopPropagation())}),t(2,"div",22)(3,"h3",23),r(4,"Registro de Nueva Cuenta"),i(),t(5,"button",24),p("click",function(){u(e);let d=c();return m(d.cerrarModal())}),f(),t(6,"svg",25),v(7,"path",26),i()()(),C(),v(8,"app-registrar",43),i()()}if(o&2){let e=c();l(8),x("solicitud",e.selectedSolicitud)}}var y=class o{constructor(n,e){this.ftpService=n;this.sanitizer=e}solicitudesService=E(N);solicitudes=[];pdfUrl=null;mostrarModal=!1;mostrarModalDetalles=!1;selectedSolicitud=null;documentUrl=null;cuenta={numeroCuenta:"",numeroCCI:"",comentario:"",documentoRespuesta:null};solicitud={estado:"PENDIENTE"};ngOnInit(){this.cargarSolicitudes()}cargarSolicitudes(){this.solicitudesService.list().subscribe({next:n=>{this.solicitudes=n,console.log(n)},error:n=>console.error("Error al cargar solicitudes:",n)})}verOficio(n){window.open(n,"_blank")}verPdf(n){if(!n){this.pdfUrl=null;return}this.ftpService.downloadFile(n).subscribe({next:e=>this.mostrarPdfEnIframe(e),error:e=>this.manejarErrorDescarga(e)})}mostrarPdfEnIframe(n){let e=URL.createObjectURL(n);this.pdfUrl=this.sanitizer.bypassSecurityTrustResourceUrl(e)}manejarErrorDescarga(n){console.error("Error al descargar el archivo:",n.message),alert(n.message),this.pdfUrl=null}verDetalles(n,e){this.selectedSolicitud=n,this.mostrarModalDetalles=!0,this.ftpService.downloadFile(e).subscribe({next:a=>this.mostrarPdfEnIframe(a),error:a=>console.error("Error al descargar el archivo:",a)})}cerrarModalDetalles(){this.mostrarModalDetalles=!1,this.resetearPdf()}resetearPdf(){this.pdfUrl=null,this.selectedSolicitud=null}verRegistro(n){this.mostrarModal=!0,this.selectedSolicitud=n,this.resetearFormularioCuenta()}cerrarModal(){this.mostrarModal=!1,this.resetearFormularioCuenta(),this.documentUrl=null}resetearFormularioCuenta(){this.cuenta={numeroCuenta:"",numeroCCI:"",comentario:"",documentoRespuesta:null}}onFileSelected(n){let e=n.target;if(e.files&&e.files.length>0){let a=e.files[0];this.procesarArchivoSeleccionado(a)}}procesarArchivoSeleccionado(n){n.type==="application/pdf"?(this.cuenta.documentoRespuesta=n,this.previsualizarPdf(n)):(alert("Por favor, seleccione un archivo PDF v\xE1lido"),this.cuenta.documentoRespuesta=null,this.documentUrl=null)}previsualizarPdf(n){let e=new FileReader;e.onload=a=>{this.documentUrl=a.target.result},e.readAsDataURL(n)}onSubmit(){this.validarCuenta()&&console.log("Datos de la cuenta:",this.cuenta)}validarCuenta(){return!!(this.cuenta.numeroCuenta&&this.cuenta.numeroCCI&&this.cuenta.comentario)}static \u0275fac=function(e){return new(e||o)(S(O),S(j))};static \u0275cmp=I({type:o,selectors:[["app-cuentas-creadas"]],decls:26,vars:2,consts:[[1,"p-6","bg-white","rounded-lg","shadow-md"],[1,"text-3xl","font-semibold","text-gray-800","mb-6"],[1,"overflow-x-auto","rounded-lg","border","border-gray-200"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-bold","text-gray-500","uppercase","tracking-wider"],[1,"px-6","py-3","text-center","text-xs","font-bold","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-50","transition-colors"],["class","fixed inset-0 z-50 flex items-center justify-center bg-gray-50/75",3,"click",4,"ngIf"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-700","font-medium"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-600"],[1,"px-6","py-4","whitespace-nowrap"],[1,"px-3","py-1","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],[1,"px-6","py-4","text-sm","text-gray-600","max-w-xs"],[1,"px-2","py-4","whitespace-nowrap"],[1,"flex","justify-center","items-center","gap-2"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-[#1648b6]","hover:bg-[#23203a]",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16.862 3.487a2.25 2.25 0 113.182 3.182l-12.67 12.67a1.5 1.5 0 01-.707.393l-4.09 1.023a.75.75 0 01-.922-.922l1.023-4.09a1.5 1.5 0 01.393-.707l12.67-12.67zm0 0L19.5 6.125"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-gray-50/75",3,"click"],[1,"bg-white","rounded-lg","shadow-2xl","w-full","max-w-5xl","h-[90vh]","mx-4",3,"click"],[1,"flex","justify-between","items-center","p-4","border-b","border-gray-200"],[1,"text-xl","font-semibold","text-gray-800"],[1,"text-gray-500","hover:text-gray-700",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","h-[calc(90vh-100px)]"],[1,"w-1/3","p-6","space-y-4","overflow-auto","border-r","border-gray-200"],[1,"space-y-3"],[1,"block","text-sm","font-medium","text-gray-600"],[1,"mt-1","text-gray-900"],[1,"mt-1","px-3","py-1","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],[1,"mt-1","inline-flex","items-center","px-3","py-1.5","border","border-transparent","text-xs","font-medium","rounded-md","text-white","bg-[#c52424]","hover:bg-[#6d3b3b]",3,"click"],[1,"mt-4"],[1,"mt-1","text-gray-900","whitespace-pre-wrap"],[1,"w-2/3","p-4"],["class","w-full h-full border rounded-lg","allowfullscreen","",3,"src",4,"ngIf"],["class","flex items-center justify-center h-full text-gray-500",4,"ngIf"],[1,"p-4","border-t","border-gray-200","flex","justify-end","space-x-3"],[1,"px-4","py-2","border","border-gray-300","rounded-md","text-gray-700","hover:bg-gray-50",3,"click"],["allowfullscreen","",1,"w-full","h-full","border","rounded-lg",3,"src"],[1,"flex","items-center","justify-center","h-full","text-gray-500"],[3,"solicitud"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"h2",1),r(2,"Solicitudes"),i(),t(3,"div",2)(4,"table",3)(5,"thead",4)(6,"tr")(7,"th",5),r(8,"Carta Resp"),i(),t(9,"th",5),r(10,"Demandado"),i(),t(11,"th",5),r(12,"Estado"),i(),t(13,"th",5),r(14,"CTA"),i(),t(15,"th",5),r(16,"CCI"),i(),t(17,"th",5),r(18,"Fecha Creaci\xF3n"),i(),t(19,"th",6),r(20,"Modificar"),i()()(),t(21,"tbody",7),k(22,G,20,11,"tr",8,B),i()()()(),_(24,J,58,17,"div",9)(25,q,9,1,"div",9)),e&2&&(l(22),D(a.solicitudes),l(2),x("ngIf",a.mostrarModalDetalles),l(),x("ngIf",a.mostrarModal))},dependencies:[U,V,F,R,P,z],encapsulation:2})};export{y as default};
